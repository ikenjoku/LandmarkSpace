{"version":3,"sources":["../../server/routes/eventsRouter.js"],"names":["express","require","bodyParser","eventsRouter","Router","use","json","mongoose","Events","route","get","req","res","next","find","then","events","statusCode","setHeader","err","catch","post","create","body","event","put","end","delete","remove","response","findById","params","eventId","findByIdAndUpdate","$set","new","findByIdAndRemove","module","exports"],"mappings":"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","file":"eventsRouter.js","sourcesContent":["const express = require('express');\r\nconst bodyParser = require('body-parser');\r\nconst eventsRouter = express.Router();\r\neventsRouter.use(bodyParser.json());\r\n\r\nconst mongoose = require('mongoose');\r\nconst Events = require('../models/Events');\r\n\r\neventsRouter.route('/')\r\n    .get((req, res, next) => {\r\n        Events.find({})\r\n            .then((events) => {\r\n                res.statusCode = 200;\r\n                res.setHeader('Content-Type', 'application/json');\r\n                res.json(events)\r\n            }, (err) => next(err))\r\n            .catch((err) => next(err));\r\n    })\r\n    .post((req, res, next) => {\r\n        Events.create(req.body)\r\n            .then((event) => {\r\n                res.statusCode = 201;\r\n                res.setHeader('Content-Type', 'application/json');\r\n                res.json(event)\r\n            }, (err) => next(err))\r\n            .catch((err) => next(err));\r\n    })\r\n    .put((req, res, next) => {\r\n        res.statusCode = 403;\r\n        res.end('PUT operation not supported');\r\n    })\r\n    .delete((req, res, next) => {\r\n        Events.remove({})\r\n            .then((response) => {\r\n                res.statusCode = 200;\r\n                res.setHeader('Content-Type', 'application/json');\r\n                res.json(response);\r\n            }, (err) => next(err))\r\n            .catch((err) => next(err))\r\n    });\r\n\r\neventsRouter.route('/:eventId')\r\n    .get((req, res, next) => {\r\n        Events.findById(req.params.eventId)\r\n            .then((event) => {\r\n                res.statusCode = 200;\r\n                res.setHeader('Content-Type', 'application/json');\r\n                res.json(event);\r\n            }, (err) => next(err))\r\n            .catch((err) => next(err))\r\n    })\r\n    .post((req, res, next) => {\r\n        res.end('POST operation not supported');\r\n    })\r\n    .put((req, res, next) => {\r\n        Events.findByIdAndUpdate(req.params.eventId, {\r\n                $set: req.body,\r\n            }, { new: true })\r\n            .then((event) => {\r\n                res.statusCode = 200;\r\n                res.setHeader('Content-Type', 'application/json');\r\n                res.json(event);\r\n            }, (err) => next(err))\r\n            .catch((err) => next(err))\r\n    })\r\n    .delete((req, res, next) => {\r\n        Events.findByIdAndRemove(req.params.eventId)\r\n            .then((response) => {\r\n                res.statusCode = 200;\r\n                res.setHeader('Content-Type', 'application/json');\r\n                res.json(response)\r\n            }, (err) => next(err))\r\n            .catch((err) => next(err));\r\n    });\r\n\r\nmodule.exports = eventsRouter;"]}