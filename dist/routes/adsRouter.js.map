{"version":3,"sources":["../../server/routes/adsRouter.js"],"names":["express","require","bodyParser","adsRouter","Router","use","json","mongoose","Ads","route","get","req","res","next","find","then","ad","statusCode","setHeader","err","catch","post","create","body","put","end","delete","remove","response","findById","params","adId","findByIdAndUpdate","$set","new","findByIdAndRemove","module","exports"],"mappings":"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","file":"adsRouter.js","sourcesContent":["const express = require('express');\r\nconst bodyParser = require('body-parser');\r\nconst adsRouter = express.Router();\r\nadsRouter.use(bodyParser.json());\r\n\r\nconst mongoose = require('mongoose');\r\nconst Ads = require('../models/Ads');\r\n\r\nadsRouter.route('/')\r\n    .get((req, res, next) => {\r\n        Ads.find({})\r\n            .then((ad) => {\r\n                res.statusCode = 200;\r\n                res.setHeader('Content-Type', 'application/json');\r\n                res.json(ad)\r\n            }, (err) => next(err))\r\n            .catch((err) => next(err));\r\n    })\r\n    .post((req, res, next) => {\r\n        Ads.create(req.body)\r\n            .then((ad) => {\r\n                res.statusCode = 201;\r\n                res.setHeader('Content-Type', 'application/json');\r\n                res.json(ad)\r\n            }, (err) => next(err))\r\n            .catch((err) => next(err));\r\n    })\r\n    .put((req, res, next) => {\r\n        res.statusCode = 403;\r\n        res.end('PUT operation not supported');\r\n    })\r\n    .delete((req, res, next) => {\r\n        Ads.remove({})\r\n            .then((response) => {\r\n                res.statusCode = 200;\r\n                res.setHeader('Content-Type', 'application/json');\r\n                res.json(response);\r\n            }, (err) => next(err))\r\n            .catch((err) => next(err))\r\n    });\r\n\r\n\r\nadsRouter.route('/:adId')\r\n    .get((req, res, next) => {\r\n        Ads.findById(req.params.adId)\r\n            .then((ad) => {\r\n                res.statusCode = 200;\r\n                res.setHeader('Content-Type', 'application/json');\r\n                res.json(ad);\r\n            }, (err) => next(err))\r\n            .catch((err) => next(err))\r\n    })\r\n    .post((req, res, next) => {\r\n        res.end('POST operation not supported');\r\n    })\r\n    .put((req, res, next) => {\r\n        Ads.findByIdAndUpdate(req.params.adId, {\r\n                $set: req.body,\r\n            }, { new: true })\r\n            .then((ad) => {\r\n                res.statusCode = 200;\r\n                res.setHeader('Content-Type', 'application/json');\r\n                res.json(ad);\r\n            }, (err) => next(err))\r\n            .catch((err) => next(err))\r\n    })\r\n    .delete((req, res, next) => {\r\n        Ads.findByIdAndRemove(req.params.adId)\r\n            .then((response) => {\r\n                res.statusCode = 200;\r\n                res.setHeader('Content-Type', 'application/json');\r\n                res.json(response)\r\n            }, (err) => next(err))\r\n            .catch((err) => next(err));\r\n    });\r\n\r\nmodule.exports = adsRouter;"]}